<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
</head>
<body class="layout-container">

<nav class="navigation" data-ice="nav"><h1><a href="./">HOME</a> | <a href="@index.html">INDEX</a></h1>

<div data-ice="classWrap">
  <h2>Class</h2>
  <ul>
    
  <li data-ice="classDoc"><span><a href="%40class-src%7CUtil%7CASTUtil.js~ASTUtil.html">ASTUtil</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CDoc%7CAbstractDoc.js~AbstractDoc.html">AbstractDoc</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CDoc%7CAssignmentDoc.js~AssignmentDoc.html">AssignmentDoc</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CDoc%7CClassDoc.js~ClassDoc.html">ClassDoc</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CPublisher%7Cbuilder%7CClassDocBuilder.js~ClassDocBuilder.html">ClassDocBuilder</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CParser%7CCommentParser.js~CommentParser.html">CommentParser</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CPublisher%7Cbuilder%7CDocBuilder.js~DocBuilder.html">DocBuilder</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CFactory%7CDocFactory.js~DocFactory.html">DocFactory</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CPublisher%7Cbuilder%7CDocResolver.js~DocResolver.html">DocResolver</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CESDoc.js~ESDoc.html">ESDoc</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CESDocCLI.js~ESDocCLI.html">ESDocCLI</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CParser%7CESParser.js~ESParser.html">ESParser</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CDoc%7CExternalDoc.js~ExternalDoc.html">ExternalDoc</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CDoc%7CFileDoc.js~FileDoc.html">FileDoc</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CPublisher%7Cbuilder%7CFileDocBuilder.js~FileDocBuilder.html">FileDocBuilder</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CDoc%7CFunctionDoc.js~FunctionDoc.html">FunctionDoc</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CPublisher%7Cbuilder%7CIndexDocBuilder.js~IndexDocBuilder.html">IndexDocBuilder</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CDoc%7CMemberDoc.js~MemberDoc.html">MemberDoc</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CDoc%7CMethodDoc.js~MethodDoc.html">MethodDoc</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CParser%7CParamParser.js~ParamParser.html">ParamParser</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CUtil%7CPathResolver.js~PathResolver.html">PathResolver</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CPublisher%7Cbuilder%7CReadmeDocBuilder.js~ReadmeDocBuilder.html">ReadmeDocBuilder</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CPublisher%7Cbuilder%7CSearchIndexBuilder.js~SearchIndexBuilder.html">SearchIndexBuilder</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CPublisher%7Cbuilder%7CSingleDocBuilder.js~SingleDocBuilder.html">SingleDocBuilder</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CPublisher%7Cbuilder%7CStaticFileBuilder.js~StaticFileBuilder.html">StaticFileBuilder</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CDoc%7CTypedefDoc.js~TypedefDoc.html">TypedefDoc</a></span></li>
<li data-ice="classDoc"><span><a href="%40class-src%7CDoc%7CVariableDoc.js~VariableDoc.html">VariableDoc</a></span></li>
</ul>
</div>







<div data-ice="typedefWrap">
  <h2><a href="@typedef.html">Typedef</a></h2>
  <ul>
    
  <li data-ice="typedefDoc"><span><a href="%40typedef.html#static-typedef-DocObject">DocObject</a></span></li>
<li data-ice="typedefDoc"><span><a href="%40typedef.html#static-typedef-DocTypedef">DocTypedef</a></span></li>
<li data-ice="typedefDoc"><span><a href="%40typedef.html#static-typedef-ESDocConfig">ESDocConfig</a></span></li>
<li data-ice="typedefDoc"><span><a href="%40typedef.html#static-typedef-IceCapInstanceTypedef">IceCapInstanceTypedef</a></span></li>
<li data-ice="typedefDoc"><span><a href="%40typedef.html#static-typedef-PackageTypedef">PackageTypedef</a></span></li>
<li data-ice="typedefDoc"><span><a href="%40typedef.html#static-typedef-TaffyCursor">TaffyCursor</a></span></li>
<li data-ice="typedefDoc"><span><a href="%40typedef.html#static-typedef-Tag">Tag</a></span></li>
</ul>
</div>

<div data-ice="fileWrap">
  <h2>File</h2>
  <ul>
    
  <li data-ice="fileDoc"><span><a href="%40file-src%7CDoc%7CAbstractDoc.js.html#lineNumber1">src/Doc/AbstractDoc.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CDoc%7CAssignmentDoc.js.html#lineNumber1">src/Doc/AssignmentDoc.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CDoc%7CClassDoc.js.html#lineNumber1">src/Doc/ClassDoc.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CDoc%7CExternalDoc.js.html#lineNumber1">src/Doc/ExternalDoc.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CDoc%7CFileDoc.js.html#lineNumber1">src/Doc/FileDoc.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CDoc%7CFunctionDoc.js.html#lineNumber1">src/Doc/FunctionDoc.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CDoc%7CMemberDoc.js.html#lineNumber1">src/Doc/MemberDoc.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CDoc%7CMethodDoc.js.html#lineNumber1">src/Doc/MethodDoc.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CDoc%7CTypedefDoc.js.html#lineNumber1">src/Doc/TypedefDoc.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CDoc%7CVariableDoc.js.html#lineNumber1">src/Doc/VariableDoc.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CESDoc.js.html#lineNumber1">src/ESDoc.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CESDocCLI.js.html#lineNumber2">src/ESDocCLI.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CFactory%7CDocFactory.js.html#lineNumber1">src/Factory/DocFactory.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CParser%7CCommentParser.js.html#lineNumber1">src/Parser/CommentParser.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CParser%7CESParser.js.html#lineNumber1">src/Parser/ESParser.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CParser%7CParamParser.js.html#lineNumber1">src/Parser/ParamParser.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CPublisher%7Cbuilder%7CClassDocBuilder.js.html#lineNumber1">src/Publisher/builder/ClassDocBuilder.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CPublisher%7Cbuilder%7CDocBuilder.js.html#lineNumber1">src/Publisher/builder/DocBuilder.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CPublisher%7Cbuilder%7CDocResolver.js.html#lineNumber1">src/Publisher/builder/DocResolver.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CPublisher%7Cbuilder%7CFileDocBuilder.js.html#lineNumber1">src/Publisher/builder/FileDocBuilder.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CPublisher%7Cbuilder%7CIndexDocBuilder.js.html#lineNumber1">src/Publisher/builder/IndexDocBuilder.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CPublisher%7Cbuilder%7CReadmeDocBuilder.js.html#lineNumber1">src/Publisher/builder/ReadmeDocBuilder.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CPublisher%7Cbuilder%7CSearchIndexBuilder.js.html#lineNumber1">src/Publisher/builder/SearchIndexBuilder.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CPublisher%7Cbuilder%7CSingleDocBuilder.js.html#lineNumber1">src/Publisher/builder/SingleDocBuilder.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CPublisher%7Cbuilder%7CStaticFileBuilder.js.html#lineNumber1">src/Publisher/builder/StaticFileBuilder.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CPublisher%7Cbuilder%7Cutil.js.html#lineNumber1">src/Publisher/builder/util.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CPublisher%7Cpublish.js.html#lineNumber1">src/Publisher/publish.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CTypedef%7Ctypedef.js.html#lineNumber50">src/Typedef/typedef.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CUtil%7CASTUtil.js.html#lineNumber1">src/Util/ASTUtil.js</a></span></li>
<li data-ice="fileDoc"><span><a href="%40file-src%7CUtil%7CPathResolver.js.html#lineNumber1">src/Util/PathResolver.js</a></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/Publisher/builder/ClassDocBuilder.js</h1>
<pre class="source-code line-number"><code class="prettyprint linenums" data-ice="content">import IceCap from &apos;ice-cap&apos;;
import DocBuilder from &apos;./DocBuilder.js&apos;;

export default class ClassDocBuilder extends DocBuilder {
  exec(callback) {
    var ice = this._buildLayoutDoc();
    ice.autoDrop = false;
    var docs = this._find({kind: [&apos;class&apos;]});
    for (var doc of docs) {
      ice.load(&apos;content&apos;, this._buildObjectDoc(doc), IceCap.MODE_WRITE);
      var fileName = this._getOutputFileName(doc);
      callback(ice.html, fileName);
    }
  }

  _buildObjectDoc(doc) {
    var extendsChain = this._buildExtendsChainHTML(doc);
    var directSubclass = this._buildDirectSubclassHTML(doc);
    var indirectSubclass = this._buildIndirectSubclassHTML(doc);

    var ice = new IceCap(this._readTemplate(&apos;@class.html&apos;));

    // header
    if (doc.export &amp;&amp; doc.importPath &amp;&amp; doc.importStyle) {
      let link = this._buildFileDocLinkHTML(doc, doc.importPath);
      ice.into(&apos;importPath&apos;, `import ${doc.importStyle} from &apos;${link}&apos;`, (code, ice)=&gt;{
        ice.load(&apos;importPathCode&apos;, code);
      });
    }
    ice.text(&apos;access&apos;, doc.access);
    ice.text(&apos;kind&apos;, doc.interface ? &apos;interface&apos; : &apos;class&apos;);
    ice.load(&apos;source&apos;, this._buildFileDocLinkHTML(doc, &apos;source&apos;), &apos;append&apos;);
    ice.text(&apos;since&apos;, doc.since, &apos;append&apos;);
    ice.text(&apos;version&apos;, doc.version, &apos;append&apos;);
    ice.load(&apos;variation&apos;, this._buildVariationHTML(doc), &apos;append&apos;);

    // extends chain
    ice.load(&apos;extendsChain&apos;, extendsChain, &apos;append&apos;);
    ice.load(&apos;directSubclass&apos;, directSubclass, &apos;append&apos;);
    ice.load(&apos;indirectSubclass&apos;, indirectSubclass, &apos;append&apos;);
    ice.load(&apos;implements&apos;, this._buildDocsLinkHTML(doc.implements, null, false, &apos;, &apos;), &apos;append&apos;);
    ice.load(&apos;indirectImplements&apos;, this._buildDocsLinkHTML(doc._custom_indirect_implements, null, false, &apos;, &apos;), &apos;append&apos;);
    ice.load(&apos;directImplemented&apos;, this._buildDocsLinkHTML(doc._custom_direct_implemented, null, false, &apos;, &apos;), &apos;append&apos;);
    ice.load(&apos;indirectImplemented&apos;, this._buildDocsLinkHTML(doc._custom_indirect_implemented, null, false, &apos;, &apos;), &apos;append&apos;);

    // self
    ice.text(&apos;name&apos;, doc.name);
    ice.load(&apos;description&apos;, doc.description);
    ice.load(&apos;deprecated&apos;, this._buildDeprecatedHTML(doc));
    ice.load(&apos;experimental&apos;, this._buildExperimentalHTML(doc));
    ice.load(&apos;see&apos;, this._buildDocsLinkHTML(doc.see), &apos;append&apos;);
    ice.load(&apos;todo&apos;, this._buildDocsLinkHTML(doc.todo), &apos;append&apos;);

    ice.into(&apos;exampleDocs&apos;, doc.examples, (examples, ice)=&gt;{
      ice.loop(&apos;exampleDoc&apos;, examples, (i, example, ice)=&gt;{
        ice.text(&apos;exampleCode&apos;, example);
      });
    });

    // summary
    ice.load(&apos;staticMemberSummary&apos;, this._buildSummaryHTML(doc, &apos;member&apos;, &apos;Members&apos;, true));
    ice.load(&apos;staticMethodSummary&apos;, this._buildSummaryHTML(doc, &apos;method&apos;, &apos;Methods&apos;, true));
    ice.load(&apos;constructorSummary&apos;, this._buildSummaryHTML(doc, &apos;constructor&apos;, &apos;Constructor&apos;, false));
    ice.load(&apos;memberSummary&apos;, this._buildSummaryHTML(doc, &apos;member&apos;, &apos;Members&apos;, false));
    ice.load(&apos;methodSummary&apos;, this._buildSummaryHTML(doc, &apos;method&apos;, &apos;Methods&apos;, false));

    ice.load(&apos;inheritedSummary&apos;, this._buildInheritedSummaryHTML(doc), &apos;append&apos;);

    // detail
    ice.load(&apos;staticMemberDetails&apos;, this._buildDetailHTML(doc, &apos;member&apos;, &apos;Members&apos;, true));
    ice.load(&apos;staticMethodDetails&apos;, this._buildDetailHTML(doc, &apos;method&apos;, &apos;Methods&apos;, true));
    ice.load(&apos;constructorDetails&apos;, this._buildDetailHTML(doc, &apos;constructor&apos;, &apos;Constructors&apos;, false));
    ice.load(&apos;memberDetails&apos;, this._buildDetailHTML(doc, &apos;member&apos;, &apos;Members&apos;, false));
    ice.load(&apos;methodDetails&apos;, this._buildDetailHTML(doc, &apos;method&apos;, &apos;Methods&apos;, false));

    return ice;
  }

  _buildVariationHTML(doc) {
    var variationDocs = this._find({memberof: doc.memberof, name: doc.name});
    var html = [];
    for (var variationDoc of variationDocs) {
      if (variationDoc.variation === doc.variation) continue;

      html.push(this._buildDocLinkHTML(variationDoc.longname, `(${variationDoc.variation || 1})`));
    }

    return html.join(&apos;, &apos;);
  }

  _buildExtendsChainHTML(doc) {
    if (!doc._custom_extends_chains) return;

    var links = [];
    for (var longname of doc._custom_extends_chains) {
      links.push(this._buildDocLinkHTML(longname));
    }

    links.push(doc.name);

    return links.join(&apos; &#x2192; &apos;);
  }

  _buildIndirectSubclassHTML(doc) {
    if (!doc._custom_indirect_subclasses) return;

    var links = [];
    for (var longname of doc._custom_indirect_subclasses) {
      links.push(this._buildDocLinkHTML(longname));
    }
    return links.join(&apos;, &apos;);
  }

  _buildDirectSubclassHTML(doc) {
    if (!doc._custom_direct_subclasses) return;

    var links = [];
    for (var longname of doc._custom_direct_subclasses) {
      links.push(this._buildDocLinkHTML(longname));
    }
    return links.join(&apos;, &apos;);
  }

  _buildInheritedSummaryHTML(doc) {
    if ([&apos;class&apos;, &apos;interface&apos;].indexOf(doc.kind) === -1) return;

    let longnames = [
      ...doc._custom_extends_chains || []
      //...doc.implements || [],
      //...doc._custom_indirect_implements || [],
    ];

    let html = [];
    for (let longname of longnames) {
      let superDoc = this._find({longname})[0];

      if (!superDoc) continue;

      let targetDocs = this._find({memberof: longname, kind: [&apos;member&apos;, &apos;method&apos;, &apos;get&apos;, &apos;set&apos;]});

      targetDocs.sort((a, b)=&gt;{
        if (a.static !== b.static) return -(a.static - b.static);

        let order = {get: 0, set: 0, member: 1, method: 2};
        if (order[a.kind] !== order[b.kind]) {
          return order[a.kind] - order[b.kind];
        }

        order = {public: 0, protected: 1, private: 2};
        if (a.access != b.access) return order[a.access] - order[b.access];

        if (a.name !== b.name) return a.name &lt; b.name ? -1 : 1;

        order = {get: 0, set: 1, member: 2};
        return order[a.kind] - order[b.kind];
      });

      let title = `From ${superDoc.kind} ${this._buildDocLinkHTML(longname, superDoc.name)}`;
      let result = this._buildSummaryDoc(targetDocs, &apos;----------&apos;, false, superDoc.kind);
      if (result) {
        result.load(&apos;title&apos;, title, IceCap.MODE_WRITE);
        html.push(result.html);
      }
    }

    return html.join(&apos;\n&apos;);
  }
}
</code></pre>
</div>

<footer class="footer">
  <span class="version" data-ice="version">version: 0.0.1</span>
  <span class="url"><a data-ice="url" href="https://github.com/h13i32maru/esdoc">https://github.com/h13i32maru/esdoc</a></span>
  Generated by <a href="https://esdoc.org">ESDoc</a>
</footer>

<div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
  <ul class="search-result"></ul>
</div>
<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
</body>
</html>
